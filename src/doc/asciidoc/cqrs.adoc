:description: CQRS in Theorie und praktisch mit dem Axon Framework
:backend: revealjs
:author: Christian Iwanzik
:twitter: chrisIwanzik
:revealjs_theme: default
:customcss: ./cqrs.css

= CQRS

Command Query Responsibility Segregation

== Bauen wir einen Customer Service!

[source,kotlin]
----
include::{sourcedir}/kotlin/de/tarent/crud/one/CustomerCrud.kt[tags=presentation]
----

[NOTE.speaker]
--
Good old CRUD. Lediglich ein Modell und einige Methoden. Warum dann nicht direkt eine noSQL DB?
--

=== ... und dann kamen die Anforderungen

Hm. Die UUID soll bei der Registrierung erzeugt werden.

[source,kotlin]
----
include::{sourcedir}/kotlin/de/tarent/crud/two/CustomerUuidGenerator.kt[tags=presentation]
----

[NOTE.speaker]
--
Oh je. Unser schönes CRUD wird aufgelöst. Statt einem zentralen Modell haben wir plötzlich
schon zwei verschiedene.
--

[%notitle]
=== ... noch mehr Anforderungen

Oh, die Email darf nicht mehr einfach so einfach geändert werden...

[source,kotlin]
----
include::{sourcedir}/kotlin/de/tarent/crud/three/CustomerEmailOptin.kt[tags=presentation2]
----

[source,kotlin]
----
include::{sourcedir}/kotlin/de/tarent/crud/three/CustomerEmailOptin.kt[tags=presentation1]
----

[NOTE.speaker]
--
Und schon ist es mit CRUD am Ende. Allein das die Email über ein Double-Optin geschehen muss,
zwingt uns zu einem "Zwischenstand" im Modell.
--

[transition=fast]
== Ist CRUD noch das Mittel der Wahl?
image::crud.jpg[background, size=cover]

[NOTE.speaker]
--
Das war mal ein schönes Modell und ein guter Anfang.
--

[transition=fast]
=== Ist CRUD noch das Mittel der Wahl?
image::crudExploded_1.svg[background, size=cover]

[NOTE.speaker]
--
Das war mal ein schönes Modell und ein guter Anfang.
--

[transition=fast]
=== Ist CRUD noch das Mittel der Wahl?
image::crudExploded_2.svg[background, size=cover]

[NOTE.speaker]
--
Das war mal ein schönes Modell und ein guter Anfang.
--

[transition=fast]
=== Ist CRUD noch das Mittel der Wahl?
image::crudExploded_3.svg[background, size=cover]

[NOTE.speaker]
--
Das war mal ein schönes Modell und ein guter Anfang.
--

[transition=fast]
=== Ist CRUD noch das Mittel der Wahl?
image::crudExploded_3.svg[background, size=cover]

[NOTE.speaker]
--
Thunderbirds Beispiel
--

== Divide and Conquer

=== CQRS
=== Event Sourceing

== Axon - Livedemo

== Quellen
* https://martinfowler.com/bliki/CQRS.html
* http://codebetter.com/gregyoung/2010/02/16/cqrs-task-based-uis-event-sourcing-agh/
* https://martinfowler.com/eaaDev/EventSourcing.html
